<h2>Administation pages</h2>

<p>
	Administation pages are pages where administrative task are performed, such as managing pages or users. Other then that they are no
	different from other pages (see <a href="../plugins/page">Pages</a>).
</p>

<h5>Example administration page</h5>

<pre>
<?php
$contrSetup = array(
	'rootPath'  => '../',
	'pageTitle' => 'Example',
	'inAdmin'   => TRUE
	);

require($contrSetup['rootPath'] . '_model/init.php');

// Check if the admin plugin is installed and ready
$model->check_dependencies(array('admin'));

// Check if the user has access to this page (using a custom permssion)
if ( !$model->perm->check('admin example access') )
{
	header('Location: ' . $contr->rootPath . 'login?ref=' . rawurlencode($_SERVER['PHP_SELF']));

	$model->end();
}

$view->load('admin/example.html.php');

$model->end();
?>
</pre>

<ol>
	<li>
		Administrative pages should be placed inside the <code>/admin/</code> directory and made inaccessible for anyone but editors or higher.
	</li>
	<li>
		The <code>$contrSetup['inAdmin']</code> needs to be set to <code>TRUE</code>. This variable is passed to the <a href="../concepts/view">View</a>
		(<code>$view->inAdmin</code>) so an administration specific layout can be applied to the page.
	</li>
	<li>
		Optionally the <a href="../plugins/dashboard">dashboard plugin</a> is used to list administration pages;
		<code>$model->check_dependencies(array('dashboard'))</code> is there to check if the plugin is installed and ready.
	</li>
	<li>
		Use <code>$model->perm->check()</code> to check if the user has permission to access the page (this requires the
		<a href="../plugins/permission">Permission</a> and <a href="../plugins/session">Session</a> plugins. If authorization fails the user is redirected to the login page.
	</li>
</ol>

<h3>See also</h3>

<ul>
	<li>
		<a href="../plugins/dashboard">Dashboard (plugin)</a>
	</li>
	<li>
		<a href="../plugins/page">Page (plugin)</a>
	</li>
	<li>
		<a href="../plugins/permission">Permission (plugin)</a>
	</li>
</ul>

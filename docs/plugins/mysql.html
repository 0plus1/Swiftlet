<h2>MySQL</h2>

<p><code>/_plugins/buffer.php</code></p>

<p>
	This plug-in handles MySQL database connections and queries.
</p>

<h3>SQL queries</h3>

<p>
	Use <code>$model->db->sql()</code> to execute SQL queries and <code>$model->db->result</code> to access
	the result. The type of result depends on the type of query:
</p>

<ul>
	<li>
		<code>SELECT</code>, <code>SHOW</code>, <code>EXPLAIN</code><br/>
		An array containing the returned rows.
	</li>
	<li>
		<code>INSERT</code><br/>
		The id of the inserted row.
	</li>
	<li>
		<code>UPDATE</code>, <code>DELETE</code> and all others<br/>
		The number of affected rows.
	</li>
</ul>

<h4>Example:</h4>

<pre>
<?php
$model->db->sql('
	SELECT
		*
	FROM `' . $model->db->prefix . 'foo`
	WHERE
		`bar` = "' . $model->db->escape($bar) . '"
	;');

if ( $r = $model->db->result )
{
	print_r($r);
}
?>
</pre>

<h3>Class</h3>

<p>
	<code>$model-&gt;db</code>
</p>

<h4>Public functions</h4>

<ul>
	<li>
		<code>$model-&gt;db-&gt;close ( <em>resource</em> $link )</code><br/>
		Use to close a database connection.
	</li>
	<li>
		<code>$model-&gt;db-&gt;escape ( <em>string|array</em> $v )</code><br/>
		Use to escape strings for safe database insertion. Note that <code>$model->POST_db_safe</code> values are already escaped.
	</li>
	<li>
		<code>$model-&gt;db-&gt;query ( <em>string</em> $sql )</code><br/>
		Use to execute an SQL query.
	</li>
</ul>

<h4>Public variables</h4>

<ul>
	<li>
		<code>$model-&gt;db-&gt;link</code><br/>
		Database connection resource.
	</li>
	<li>
		<code>$model-&gt;db-&gt;result</code><br/>
		Returned result from query that was executed last.
	</li>
</ul>
